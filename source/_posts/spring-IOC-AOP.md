---
title: spring IoC AOP
date: 2017-07-04 14:48:19
tags: [spring,java]
categories: 技术
---
spring用了这么久,发现自己对这俩了解的并没有非常深刻,故填坑.
<!-- more -->
## IoC
首先来说IoC(Inversion of Control),控制反转,这名词大家很熟悉,也是Spring的核心.在没有Spring的时候,在一个对象中，如果要使用另外的对象，就必须得到它（自己new一个，或者从JNDI中查询一个），使用完之后还要将对象销毁（比如Connection等），对象始终会和其他的接口或类藕合起来。而IOC的思想是: Spring容器来实现这些相互依赖对象的创建、协调工作。对象只需要关系业务逻辑本身就可以了。从这方面来说，对象如何得到他的协作对象的责任被反转了(IoC).就是由spring来负责控制对象的生命周期和对象间的关系.

再来举一个简单的例子说明一下这个IoC吧:
就拿找对象来说吧,传统的找对象,得到处找自己喜欢的妹纸,然后打听电话,微信,然后想办法认识啊,找机会约会啊,然后才在一起,过程很复杂,各种耦合啊,比如约会就跟打听电话,微信,找机会约会耦合在了一起.
自从有了婚介所(Spring)我啥都不用管,只管提要求啊,约会也不用自己操心啊.只管谈恋爱就行了啊.简单明了.

整个过程不再由我自己控制，而是有婚介所这样一个类似容器的机构来控制。Spring所倡导的开发方式就是如此，所有的类都会在spring容器中登记，告诉spring你是个什么东西，你需要什么东西，然后spring会在系统运行到适当的时候，把你要的东西主动给你，同时也把你交给其他需要你的东西。所有的类的创建、销毁都由 spring来控制，也就是说控制对象生存周期的不再是引用它的对象，而是spring。对于某个具体的对象而言，以前是它控制其他对象，现在是所有对象都被spring控制，所以这叫控制反转。

最后要说一下和控制反转(IoC)关系密切的依赖注入(DI)
IoC的一个重点是在系统运行中，动态的向某个对象提供它所需要的其他对象。这一点是通过DI（Dependency Injection，依赖注入）来实现的。比如对象A需要操作数据库，以前我们总是要在A中自己编写代码来获得一个Connection对象，有了 spring我们就只需要告诉spring，A中需要一个Connection，至于这个Connection怎么构造，何时构造，A不需要知道。在系统运行时，spring会在适当的时候制造一个Connection，然后像打针一样，注射到A当中，这样就完成了对各个对象之间关系的控制。A需要依赖 Connection才能正常运行，而这个Connection是由spring注入到A中的，依赖注入的名字就这么来的。那么DI是如何实现的呢？ Java 1.3之后一个重要特征是反射（reflection），它允许程序在运行的时候动态的生成对象、执行对象的方法、改变对象的属性，spring就是通过反射来实现注入的。关于反射的相关资料请查阅java doc。

# AOP
